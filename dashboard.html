<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Admin Panel</title>
  <link rel="stylesheet" href="../style.css" />
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
  <script src="../firebase-config.js"></script>
</head>
<body>
  <nav>
    <a href="../index.html">Ana Sayfa</a>
    <span id="user-menu-container" style="margin-left:auto;"></span>
  </nav>

  <div class="container" style="max-width: 700px;">
    <h1>Admin Dashboard</h1>
    <button id="logout-btn" style="float:right;">Çıkış Yap</button>

    <h2>Hesap Ekle</h2>
    <form id="add-form" style="max-width:600px;">
      <input type="text" id="title" placeholder="Başlık" required />
      <input type="number" id="price" placeholder="Fiyat" required />
      <input type="text" id="region" placeholder="Bölge" required />
      <select id="rank" required>
        <option>IRON</option>
        <option>BRONZE</option>
        <option>SILVER</option>
        <option>GOLD</option>
        <option>PLATINUM</option>
        <option>EMERALD</option>
        <option>DIAMOND</option>
        <option>MASTER</option>
        <option>GRANDMASTER</option>
        <option>CHALLENGER</option>
      </select>
      <input type="number" id="champions" placeholder="Şampiyon Sayısı" required />
      <input type="number" id="skins" placeholder="Skin Sayısı" required />
      <label for="imageFile">Hesap Görseli (Dosya):</label>
      <input type="file" id="imageFile" accept="image/*" required />
      <label><input type="checkbox" id="email_verified" /> E-posta Doğrulandı</label>
      <button type="submit">Kaydet</button>
    </form>

    <h2>Mevcut Hesaplar</h2>
    <div id="accounts-list"></div>
  </div>

  <script>
    const adminEmail = "meloboost1@gmail.com";

    const userMenuContainer = document.getElementById("user-menu-container");
    const logoutBtn = document.getElementById("logout-btn");
    const addForm = document.getElementById("add-form");
    const accountsList = document.getElementById("accounts-list");

    // Kullanıcı kontrolü ve yetkilendirme
    auth.onAuthStateChanged(user => {
      if (!user) {
        window.location.href = "../index.html";
        return;
      }

      if (user.email !== adminEmail) {
        alert("Bu sayfaya erişim yetkiniz yok.");
        auth.signOut();
        window.location.href = "../index.html";
        return;
      }

      userMenuContainer.innerHTML = `
        Hoşgeldin, ${user.email}
        <button id="btn-logout" style="margin-left:15px;">Çıkış Yap</button>
      `;

      document.getElementById("btn-logout").onclick = () => auth.signOut();

      loadAccounts();
    });

    logoutBtn.onclick = () => auth.signOut();

    function loadAccounts() {
      accountsList.innerHTML = "Yükleniyor...";
      const rankOrder = [
        "IRON","BRONZE","SILVER","GOLD","PLATINUM","EMERALD","DIAMOND","MASTER","GRANDMASTER
